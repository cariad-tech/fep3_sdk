<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuration Service &mdash; fep3-sdk</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" /><link rel="shortcut icon" href="../_static/fep_logo_white.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data Registry" href="component_data_registry.html" />
    <link rel="prev" title="Clock Sync Service" href="component_clock_sync_service.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #004666" >
            <a href="../index.html" class="icon icon-home"> fep3-sdk<img src="../_static/fep_logo_white.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
</ul>
<p><span class="caption-text">Dive into FEP SDK</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="participant_overview.html">FEP Participant Library</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="participant_overview_backup.html">(OLD) <span class="xref std std-term">FEP Participant</span> Library</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="participant_overview_backup.html#participant-library-and-api">Participant Library and API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="participant_overview_backup.html#participant-and-element">Participant and Element</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="participant_overview_backup.html#components">Components</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="participant_overview_backup.html#fep-default-components">FEP Default Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="participant_overview_backup.html#fep-component-system">FEP Component System</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="participant_overview_backup.html#core-api">Core API</a></li>
<li class="toctree-l2"><a class="reference internal" href="participant_overview_backup.html#fep-interface-cpp-api">FEP Interface CPP API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../system/system_overview.html">FEP System Library</a></li>
</ul>
<p><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">FEP SDK API</a></li>
</ul>
<p><span class="caption-text">Advanced Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced_topics/overview_advanced_topics.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_topics/timing.html">Timing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_topics/perf_test.html">Performance</a></li>
</ul>
<p><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../style_guide.html">Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
</ul>
<p><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/howto.html">HOWTO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/used_licenses.html">Used Licenses</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #004666" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">fep3-sdk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="participant_overview_backup.html">(OLD) <span class="xref std std-term">FEP Participant</span> Library</a> &raquo;</li>
          <li><a href="native_components.html">Native FEP Components</a> &raquo;</li>
      <li>Configuration Service</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/participant/component_configuration_service.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="component_clock_sync_service.html" class="btn btn-neutral float-left" title="Clock Sync Service" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="component_data_registry.html" class="btn btn-neutral float-right" title="Data Registry" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuration-service">
<span id="label-configuration-service"></span><h1><a class="toc-backref" href="#id1">Configuration Service</a><a class="headerlink" href="#configuration-service" title="Permalink to this headline"></a></h1>
<aside class="sidebar">
<p class="sidebar-title">Configuration Service</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#configuration-service" id="id1">Configuration Service</a></p>
<ul>
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id3">Overview</a></p></li>
<li><p><a class="reference internal" href="#component-interface" id="id4">Component Interface</a></p></li>
<li><p><a class="reference internal" href="#properties" id="id5">Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#create-properties" id="id6">Create properties</a></p></li>
<li><p><a class="reference internal" href="#set-property-values" id="id7">Set property values</a></p></li>
<li><p><a class="reference internal" href="#read-property-values" id="id8">Read property values</a></p></li>
<li><p><a class="reference internal" href="#retrieve-property-nodes" id="id9">Retrieve property nodes</a></p></li>
<li><p><a class="reference internal" href="#modify-properties-at-runtime" id="id10">Modify properties at runtime</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#property-variables" id="id11">Property variables</a></p></li>
<li><p><a class="reference internal" href="#property-observers" id="id12">Property observers</a></p></li>
<li><p><a class="reference internal" href="#mis-using-properties-in-fep" id="id13">(Mis)Using Properties in FEP</a></p></li>
<li><p><a class="reference internal" href="#rpc-service-interface" id="id14">RPC Service Interface</a></p></li>
</ul>
</li>
</ul>
</div>
</aside>
<section id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 63%" />
<col style="width: 6%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Name</p></td>
<td><p>Configuration Service</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Component Interface</p></td>
<td><p><a class="reference internal" href="../api.html#_CPPv4N4fep34arya21IConfigurationServiceE" title="fep3::arya::IConfigurationService"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fep3::arya::IConfigurationService</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>RPC Service Interface</p></td>
<td><p><a class="reference internal" href="../api.html#_CPPv4N4fep33rpc4arya20IRPCConfigurationDefE" title="fep3::rpc::arya::IRPCConfigurationDef"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fep3::rpc::arya::IRPCConfigurationDef</span></code></a>
<a class="reference internal" href="../api.html#_CPPv4N4fep33rpc4arya17IRPCConfigurationE" title="fep3::rpc::arya::IRPCConfiguration"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fep3::rpc::arya::IRPCConfiguration</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>RPC Service Description</p></td>
<td><p><a class="reference internal" href="../api.html#label-rpc-service-configuration-service"><span class="std std-ref">RPC Configuration Service</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>native delivery</p></td>
<td><p>built-in</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>CPP-plugin possible</p></td>
<td><p>yes</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>C-plugin possible</p></td>
<td><p>yes</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="overview">
<span id="label-configuration-service-overview"></span><h2><a class="toc-backref" href="#id3">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>The purpose of the <a class="reference internal" href="#label-configuration-service"><span class="std std-ref">Configuration Service</span></a> is to store any static data that does not change periodically during runtime.
This can be configuration data, additional information regarding a simulation (e.g. physical dimension of objects) or other types of data.
Abusing the property tree by storing frequently updated simulation data is not recommended.</p>
<p>The <a class="reference internal" href="#label-configuration-service"><span class="std std-ref">Configuration Service</span></a> stores data as properties.
A property consists of a name, a type, a value and may contain multiple children.
Properties are typed and support the following data types:</p>
<ul class="simple">
<li><p><em>int32</em></p></li>
<li><p><em>int64</em></p></li>
<li><p><em>double</em></p></li>
<li><p><em>bool</em></p></li>
<li><p><em>string</em></p></li>
<li><p><em>node</em></p></li>
</ul>
<p>A property of type <em>node</em> does not contain a value but may have children in form of sub properties.
Once a property node is typed it cannot be modified to contain value of a different type.</p>
<p>Those properties are arranged in a tree-like structure and can therefore represent hierarchical units of information.
A property which is a child of another property is called a <em>subproperty</em>.
To access a property, the path to that property has to be known.
The path is constructed of all parent properties of your target property, separated by a “/”.
Here’s an example of a property path:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>&quot;Vehicle/Size/Length&quot;
</pre></div>
</div>
<p>“Vehicle” is the top-level property in the path and a <em>subproperty</em> of the root property node “/”.
It has a <em>subproperty</em> called “Size” which itself has a <em>subproperty</em> “Length”.</p>
</section>
<section id="component-interface">
<h2><a class="toc-backref" href="#id4">Component Interface</a><a class="headerlink" href="#component-interface" title="Permalink to this headline"></a></h2>
<p>The <a class="reference internal" href="../api.html#_CPPv4N4fep34arya21IConfigurationServiceE" title="fep3::arya::IConfigurationService"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fep3::arya::IConfigurationService</span></code></a> interface has a root node which can be thought of as “/”.
This root node can contain an arbitrary amount of property nodes.
The interface offers the following functionality:</p>
<ul class="simple">
<li><p>Register property nodes at the root node</p></li>
<li><p>Unregister property nodes</p></li>
<li><p>Check node existence</p></li>
<li><p>Retrieve property nodes</p></li>
</ul>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id5">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline"></a></h2>
<p>Assuming we want to create the following property hierarchy:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 60%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vehicle/Type</p></td>
<td><p>string</p></td>
<td><p>car</p></td>
</tr>
<tr class="row-odd"><td><p>Vehicle/Size/Length</p></td>
<td><p>double</p></td>
<td><p>4.5</p></td>
</tr>
<tr class="row-even"><td><p>Vehicle/Size/Width</p></td>
<td><p>double</p></td>
<td><p>2.1</p></td>
</tr>
<tr class="row-odd"><td><p>Vehicle/Seats</p></td>
<td><p>int32</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-even"><td><p>Vehicle/Available</p></td>
<td><p>bool</p></td>
<td><p>false</p></td>
</tr>
</tbody>
</table>
<p>After retrieving the <a class="reference internal" href="../api.html#_CPPv4N4fep34arya21IConfigurationServiceE" title="fep3::arya::IConfigurationService"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fep3::arya::IConfigurationService</span></code></a> component:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">fep3</span><span class="o">::</span><span class="n">core</span><span class="o">::</span><span class="n">arya</span><span class="o">::</span><span class="n">Participant</span><span class="w"> </span><span class="n">participant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...]</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">configuration_service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">participant</span><span class="p">.</span><span class="n">getComponent</span><span class="o">&lt;</span><span class="n">fep3</span><span class="o">::</span><span class="n">arya</span><span class="o">::</span><span class="n">IConfigurationService</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>we can create, modify and read properties via this component.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While we can read and modify properties which we receive from the configuration service, we can neither extend these properties by adding sub properties nor can we register property observers or variables for them. To do so we have to create property nodes ourselves and register them at the configuration service.</p>
</div>
<section id="create-properties">
<h3><a class="toc-backref" href="#id6">Create properties</a><a class="headerlink" href="#create-properties" title="Permalink to this headline"></a></h3>
<p>Using the configuration service component and a convenience function <em>makeNativePropertyNode</em> we can create typed property nodes.</p>
<p>First of all, we need a property node which will be registered at the root node (“/”) of the configuration service.
The configuration service handles property nodes as shared pointers.
Therefore, we create a shared pointer of a <em>NativePropertyNode</em> which will contain our sub properties:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">auto</span> <span class="n">vehicle</span> <span class="o">=</span> <span class="n">std</span><span class="p">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">NativePropertyNode</span><span class="o">&gt;</span><span class="p">(</span><span class="s2">&quot;Vehicle&quot;</span><span class="p">);</span>
</span></pre></div>
</div>
<p>Afterwards, we create an empty <em>subproperty</em> of type <em>node</em> called “Size” which will contain two more sub properties of type <em>double</em> called “Length” and “Width”.
Additionally, we create typed <em>subproperty</em> nodes and set them as children for the corresponding parent property nodes.
As a result, we will have a property hierarchy as shown above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">auto</span> <span class="n">vehicle_size</span> <span class="o">=</span> <span class="n">std</span><span class="p">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">NativePropertyNode</span><span class="o">&gt;</span><span class="p">(</span><span class="s2">&quot;Size&quot;</span><span class="p">);</span>
</span><span class="hll">        <span class="n">vehicle</span><span class="o">-&gt;</span><span class="n">setChild</span><span class="p">(</span><span class="n">vehicle_size</span><span class="p">);</span>
</span><span class="hll">        <span class="n">auto</span> <span class="n">vehicle_size_length</span> <span class="o">=</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">makeNativePropertyNode</span><span class="o">&lt;</span><span class="n">double</span><span class="o">&gt;</span><span class="p">(</span><span class="s2">&quot;Length&quot;</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">);</span>
</span><span class="hll">        <span class="n">vehicle_size</span><span class="o">-&gt;</span><span class="n">setChild</span><span class="p">(</span><span class="n">vehicle_size_length</span><span class="p">);</span>
</span>        <span class="n">auto</span> <span class="n">vehicle_size_width</span> <span class="o">=</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">makeNativePropertyNode</span><span class="o">&lt;</span><span class="n">double</span><span class="o">&gt;</span><span class="p">(</span><span class="s2">&quot;Width&quot;</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">);</span>
        <span class="n">vehicle_size</span><span class="o">-&gt;</span><span class="n">setChild</span><span class="p">(</span><span class="n">vehicle_size_width</span><span class="p">);</span>
<span class="hll">        <span class="n">auto</span> <span class="n">vehicle_type</span> <span class="o">=</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">makeNativePropertyNode</span><span class="o">&lt;</span><span class="n">std</span><span class="p">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">,</span> <span class="s2">&quot;car&quot;</span><span class="p">);</span>
</span><span class="hll">        <span class="n">vehicle</span><span class="o">-&gt;</span><span class="n">setChild</span><span class="p">(</span><span class="n">vehicle_type</span><span class="p">);</span>
</span>        <span class="n">auto</span> <span class="n">vehicle_seats</span> <span class="o">=</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">makeNativePropertyNode</span><span class="o">&lt;</span><span class="n">int32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="s2">&quot;Seats&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
        <span class="n">vehicle</span><span class="o">-&gt;</span><span class="n">setChild</span><span class="p">(</span><span class="n">vehicle_seats</span><span class="p">);</span>
        <span class="n">auto</span> <span class="n">vehicle_available</span> <span class="o">=</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">makeNativePropertyNode</span><span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="s2">&quot;Available&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
        <span class="n">vehicle</span><span class="o">-&gt;</span><span class="n">setChild</span><span class="p">(</span><span class="n">vehicle_available</span><span class="p">);</span>
</pre></div>
</div>
<p>Finally, we need to register the main property node “Vehicle” at the configuration service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">configuration_service</span><span class="o">-&gt;</span><span class="n">registerNode</span><span class="p">(</span><span class="n">vehicle</span><span class="p">);</span>
</span></pre></div>
</div>
</section>
<section id="set-property-values">
<h3><a class="toc-backref" href="#id7">Set property values</a><a class="headerlink" href="#set-property-values" title="Permalink to this headline"></a></h3>
<p>After creation of properties, we can utilize the configuration service and a convenience function <em>setPropertyValue</em> to set property values.
Due to the fact that properties are typed, we cannot set mismatching property values for property nodes.
If setting a property value fails, an error is returned.</p>
<p>To set a property value we can provide the <em>configuration service</em>, <em>property path</em> and <em>value</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">setPropertyValue</span><span class="o">&lt;</span><span class="n">int32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">configuration_service</span><span class="p">,</span> <span class="s2">&quot;Vehicle/Seats&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span>        <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Result: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="o">.</span><span class="n">getErrorCode</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Alternatively, we can provide a <em>property node</em> and the corresponding <em>value</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">result</span> <span class="o">=</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">setPropertyValue</span><span class="o">&lt;</span><span class="n">int32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">vehicle_seats</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span>        <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Result: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="o">.</span><span class="n">getErrorCode</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="read-property-values">
<h3><a class="toc-backref" href="#id8">Read property values</a><a class="headerlink" href="#read-property-values" title="Permalink to this headline"></a></h3>
<p>After creation of properties, we can utilize the configuration service and a convenience function <em>getPropertyValue</em> to read property values.
Values are returned in form of typed optional. We may check for a value and retrieve the value.
Alternatively, we may simply dereference it to retrieve the corresponding value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">auto</span> <span class="n">seats</span> <span class="o">=</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">getPropertyValue</span><span class="o">&lt;</span><span class="n">int32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">configuration_service</span><span class="p">,</span> <span class="s2">&quot;Vehicle/Seats&quot;</span><span class="p">);</span>
</span>        <span class="k">if</span> <span class="p">(</span><span class="n">seats</span><span class="o">.</span><span class="n">has_value</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Seats: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">seats</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="o">//</span> <span class="n">Alternative</span> <span class="n">syntax</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">seats</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Seats: &quot;</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">seats</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
        <span class="p">}</span>
</pre></div>
</div>
<p>Alternatively, we can provide a <em>property node</em>.
In this case no optional but the value itself is returned.
In case of failure a default value is returned.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">auto</span> <span class="n">value</span> <span class="o">=</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">getPropertyValue</span><span class="o">&lt;</span><span class="n">int32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">vehicle_seats</span><span class="p">);</span>
</span></pre></div>
</div>
<p>Trying to get a property with non-existing path returns an optional with no value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        auto invalid = fep3::base::getPropertyValue&lt;int32_t&gt;(*configuration_service, &quot;Vehicle/Invalid&quot;);
</span>        if (!invalid.has_value())
        {
            std::cout &lt;&lt; &quot;Property does not exist&quot; &lt;&lt; &#39;\n&#39;;
        }
        // Alternative syntax
        if (!invalid)
        {
            std::cout &lt;&lt; &quot;Property does not exist&quot; &lt;&lt; &#39;\n&#39;;
        }
</pre></div>
</div>
</section>
<section id="retrieve-property-nodes">
<h3><a class="toc-backref" href="#id9">Retrieve property nodes</a><a class="headerlink" href="#retrieve-property-nodes" title="Permalink to this headline"></a></h3>
<p>Existing property nodes can be retrieved from the configuration service.
Retrieved nodes may be used to read information like <em>value</em>, <em>type</em> and <em>children</em> or to modify values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">auto</span> <span class="n">vehicle_node</span> <span class="o">=</span> <span class="n">configuration_service</span><span class="o">-&gt;</span><span class="n">getNode</span><span class="p">(</span><span class="s2">&quot;Vehicle&quot;</span><span class="p">);</span>
</span>        <span class="n">auto</span> <span class="n">type_node</span> <span class="o">=</span> <span class="n">vehicle_node</span><span class="o">-&gt;</span><span class="n">getChild</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">);</span>
        <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">type_node</span><span class="o">-&gt;</span><span class="n">getValue</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
        <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">type_node</span><span class="o">-&gt;</span><span class="n">getTypeName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>If we do not have to modify values, we can retrieve const nodes to retrieve information without being able to modify the node:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">auto</span> <span class="n">vehicle_node_const</span> <span class="o">=</span> <span class="n">configuration_service</span><span class="o">-&gt;</span><span class="n">getConstNode</span><span class="p">(</span><span class="s2">&quot;Vehicle&quot;</span><span class="p">);</span>
</span>        <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">vehicle_node_const</span><span class="o">-&gt;</span><span class="n">getTypeName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="modify-properties-at-runtime">
<h3><a class="toc-backref" href="#id10">Modify properties at runtime</a><a class="headerlink" href="#modify-properties-at-runtime" title="Permalink to this headline"></a></h3>
<p>Changing the value of properties at runtime is possible:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">setPropertyValue</span><span class="o">&lt;</span><span class="n">double</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">configuration_service</span><span class="p">,</span> <span class="s2">&quot;Vehicle/Size/Length&quot;</span><span class="p">,</span> <span class="mf">4.6</span><span class="p">);</span>
</span></pre></div>
</div>
<p>Changing the type of a property at runtime is <strong>not</strong> possible.
The following property was declared as <em>double</em> and trying to change it to <em>int32_t</em> returns an error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">result</span> <span class="o">=</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">setPropertyValue</span><span class="o">&lt;</span><span class="n">int32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">configuration_service</span><span class="p">,</span> <span class="s2">&quot;Vehicle/Size/Length&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</span>        <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="o">.</span><span class="n">getErrorLabel</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="property-variables">
<h2><a class="toc-backref" href="#id11">Property variables</a><a class="headerlink" href="#property-variables" title="Permalink to this headline"></a></h2>
<p>Property variables represent variables which are connected to a specific property node.
Their value is updated with the corresponding property node value every time we call <em>updateObservers</em> on the property node.</p>
<p>To use a property variable, we create and register it at a property node.
During registration the value of the property node is set to the value of the property variable.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The property node to register the property variable at has to be created by us for registration property variables.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>        <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">PropertyVariable</span><span class="o">&lt;</span><span class="n">int32_t</span><span class="o">&gt;</span> <span class="n">property_variable</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="hll">        <span class="n">vehicle_seats</span><span class="o">-&gt;</span><span class="n">registerVariable</span><span class="p">(</span><span class="n">property_variable</span><span class="p">);</span>
</span></pre></div>
</div>
<p>To synchronize the property variable with the corresponding property value, we call <em>updateObservers</em> on the property node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">vehicle_seats</span><span class="o">-&gt;</span><span class="n">updateObservers</span><span class="p">();</span>
</span>        <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">property_variable</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="property-observers">
<span id="label-property-observers"></span><h2><a class="toc-backref" href="#id12">Property observers</a><a class="headerlink" href="#property-observers" title="Permalink to this headline"></a></h2>
<p>Property observers allow reacting to property changes by listening to <em>updateObservers</em> calls of property nodes.</p>
<p>To react on property node updates, we have to provide an implementation of the <em>IPropertyObserver</em> interface
which overrides an <em>onUpdate</em> functionality taking the updated property node as function parameter.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The property node to register the property observer at has to be created by us for registration of property observers.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">struct</span> <span class="n">PropertyObserver</span> <span class="p">:</span> <span class="n">public</span> <span class="n">fep3</span><span class="p">::</span><span class="n">base</span><span class="p">::</span><span class="n">IPropertyObserver</span>
</span>        <span class="p">{</span>
<span class="hll">            <span class="n">void</span> <span class="n">onUpdate</span><span class="p">(</span><span class="n">fep3</span><span class="p">::</span><span class="n">IPropertyNode</span><span class="o">&amp;</span> <span class="n">property_node</span><span class="p">)</span> <span class="n">override</span>
</span>            <span class="p">{</span>
                <span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Update of property: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">property_node</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">};</span>
</pre></div>
</div>
<p>We have to register our property observer implementation at the property node which we want to observe.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>        <span class="n">auto</span> <span class="n">property_observer</span> <span class="o">=</span> <span class="n">std</span><span class="p">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">PropertyObserver</span><span class="o">&gt;</span><span class="p">();</span>
<span class="hll">        <span class="n">vehicle_seats</span><span class="o">-&gt;</span><span class="n">registerObserver</span><span class="p">(</span><span class="n">property_observer</span><span class="p">);</span>
</span></pre></div>
</div>
<p>To trigger the property observers registered at a property node, we call <em>updateObservers</em> of the corresponding node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll">        <span class="n">vehicle_seats</span><span class="o">-&gt;</span><span class="n">updateObservers</span><span class="p">();</span>
</span></pre></div>
</div>
</section>
<section id="mis-using-properties-in-fep">
<span id="label-using-properties-in-fep"></span><h2><a class="toc-backref" href="#id13">(Mis)Using Properties in FEP</a><a class="headerlink" href="#mis-using-properties-in-fep" title="Permalink to this headline"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case the Element should interact with the components, it is strongly advised not to directly change the properties of the Component, rather using the component interface itself.
It could be the case that properties could be read from the component only on particular transitions of the <a class="reference internal" href="participant_overview.html#label-participant-state-machine"><span class="std std-ref">State Machine</span></a>, for example only during <em>initialize_element</em>.
Also, the property value change may not be immediately visible in the component.
<strong>Properties are only meant as an interface to the “world” outside the FEP System and that is strongly advised</strong>
<strong>not to be used for inter or intra FEP Participant communication / information exchange and therefore only the entities that created a property should also access it.</strong></p>
</div>
</section>
<section id="rpc-service-interface">
<h2><a class="toc-backref" href="#id14">RPC Service Interface</a><a class="headerlink" href="#rpc-service-interface" title="Permalink to this headline"></a></h2>
<p>The <a class="reference internal" href="../api.html#_CPPv4N4fep33rpc4arya20IRPCConfigurationDefE" title="fep3::rpc::arya::IRPCConfigurationDef"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">fep3::rpc::arya::IRPCConfigurationDef</span></code></a> offers the following functionality:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>string <em>getProperties</em> (property_path)</p></td>
<td><p>Retrieve all property names as comma separated list.</p></td>
</tr>
<tr class="row-odd"><td><p>bool <em>exists</em> (property_path)</p></td>
<td><p>Check if the property path exists</p></td>
</tr>
<tr class="row-even"><td><p>(value, type) <em>getProperty</em> (property_path)</p></td>
<td><p>For a given property path get its value and its type</p></td>
</tr>
<tr class="row-odd"><td><p>error_code <em>setProperty</em> (property_path, value, type)</p></td>
<td><p>Set a property to given value. <em>type</em> is checked. <em>property_path</em> must exist.</p></td>
</tr>
</tbody>
</table>
<p>Have a look at <a class="reference internal" href="../api.html#label-rpc-service-configuration-service"><span class="std std-ref">RPC Configuration Service</span></a> for the currently supported functionality.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="component_clock_sync_service.html" class="btn btn-neutral float-left" title="Clock Sync Service" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="component_data_registry.html" class="btn btn-neutral float-right" title="Data Registry" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 14.04.2022, VW Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>